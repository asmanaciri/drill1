//dates
//9.4.1
#include<iostream>
#include<ctime>
using namespace std;
struct Date {
    int y;
    int m;
    int d;
};

Date today;

// helper functions:

void init_day(Date& dd, int y, int m, int d)
{
    //check that (y,m,d) is a valid date
    int yearMax = 3000, yearMin = 1700;
    if (y < yearMin || y > yearMax)
        cout << "Error, invalid year." << endl;
    else if (m < 1 || m > 12)
        cout << "Error, invalid month." << endl;
    else if (d < 1 || d > 31)
        cout << "Error, invalid day." << endl;
    // if it is, use to initialize dd
    else
    {
        dd.y = y;
        dd.m = m;
        dd.d = d;
    }

    return;
}

void add_day(Date& dd, int n)
{
    //increase dd by n days
    dd.d += n;
    
}

// Printing
ostream& operator<<(ostream& os, const Date& d)
{
    return os << d.d << "/" << d.m << "/" << d.y << endl;
}

int main()
{
    // set today to June 25, 1978
    init_day(today, 1978, 6, 25);
    cout << "Today: " << today;
    
    // set tomorrow
    add_day(today, 1);
    cout << "Tomorrow: " << today;

    // Invalid date test
    init_day(today, 1980, 13, -4);

    return 0;

}
//**************************************************************************************************************************************

//9.4.2
#include<iostream>
#include<ctime>
using namespace std;
struct Date {
    int y, m, d;
    Date(int y, int m, int d);
    void add_day(int n);
};

// helper functions:

Date::Date(int yy, int mm, int dd)
{
    //check that (y,m,d) is a valid date
    int yearMax = 3000, yearMin = 1700;
    if (yy < yearMin || yy > yearMax)
        cout << "Error, invalid year." << endl;
    else if (mm < 1 || mm > 12)
        cout << "Error, invalid month." << endl;
    else if (dd < 1 || dd > 31)
        cout << "Error, invalid day." << endl;
    // if it is, use to initialize dd
    else
    {
        y = yy;
        m = mm;
        d = dd;
    }

    return;
}

void Date::add_day(int n)
{
    if ((d += n) > 31)
    {
        d = 1;
        ++m;
    }
    
}

// Printing
ostream& operator<<(ostream& os, const Date& d)
{
    return os << d.d << "/" << d.m << "/" << d.y << endl;
}

int main()
{
    // set today to June 25, 1978
    Date today {1978, 6, 25};
    cout << "Today: " << today << endl;

    Date tomorrow {today};
    tomorrow.add_day(1);
    
    cout << "Tomorrow: " << tomorrow << endl;

    Date invalidDate {2004, 13, -5};

    return 0;

}
//*************************************************************************************************************************************** 
//9.4.2
  struct Date {
    int y, m, d;
    Date(int y, int m, int d);
    void add_day(int n);
};

// helper functions:

Date::Date(int yy, int mm, int dd)
{
    //check that (y,m,d) is a valid date
    int yearMax = 3000, yearMin = 1700;
    if (yy < yearMin || yy > yearMax)
        cout << "Error, invalid year." << endl;
    else if (mm < 1 || mm > 12)
        cout << "Error, invalid month." << endl;
    else if (dd < 1 || dd > 31)
        cout << "Error, invalid day." << endl;
    // if it is, use to initialize dd
    else
    {
        y = yy;
        m = mm;
        d = dd;
    }

    return;
}

void Date::add_day(int n)
{
    if ((d += n) > 31)
    {
        d = 1;
        ++m;
    }
    
}

// Printing
ostream& operator<<(ostream& os, const Date& d)
{
    return os << d.d << "/" << d.m << "/" << d.y << endl;
}

int main()
{
    // set today to June 25, 1978
    Date today {1978, 6, 25};
    cout << "Today: " << today << endl;

    Date tomorrow {today};
    tomorrow.add_day(1);
    
    cout << "Tomorrow: " << tomorrow << endl;

    Date invalidDate {2004, 13, -5};

    return 0;

}
//***************************************************************************************************************************************
//9.4.3
#include<iostream>
#include<ctime>
using namespace std;
class Date
{
public:
	Date(int y, int m, int d);

	void add_day(int n);

	int month() const { return m; }
	int day() const { return d; }
	int year() const { return y; }

private:
	int y, m, d;
};

Date::Date(int yy, int mm, int dd)
{
	//check that (y,m,d) is a valid date
    int yearMin(1900), yearMax(3000);
	if (yy > yearMax || yy < yearMin)
		cout << "Invalid year.";
	if (mm > 12 || mm < 1)
		cout << "Invalid month.";
	if (dd > 31 || dd < 1)
		cout << "Invalid day." << endl;
	else
	{
		y = yy; m = mm; d = dd;
	}
}

void Date::add_day(int n)
{
	if (d += n > 31)
	{
		d = 1;
		++m;
	}
}
// Printing
ostream& operator<<(ostream& os, const Date& d)
{
	return os << "(" << d.year()
		<< "," << d.month()
		<< "," << d.day() << ")";
}

int main()
{
	// set today to June 25, 1978
    Date today( 1978, 6, 31 );
	Date tomorrow( today );

	tomorrow.add_day(1);

	cout << today << endl;
	cout << tomorrow << endl;
	cout<<endl<<endl;
	//invalid date
	Date invalidDate {3000, Month::dec, 31};

	return 0;
}
//*************************************************************************************************************************
#include <iostream>
#include <ctime>
using namespace std;
class Date {
    int y, m, d;
public:
    Date(int y, int m, int d);      // check for valid date and initialize
    void add_day(int n);            // increase the Date by n days
    int month() const { return m; }
    int day() const { return d; }
    int year() const { return y; }
};
Date::Date(int yy, int mm, int dd)
    :y{yy}, m{mm}, d{dd}
{
    if (m < 1 || 12 < m) perror("invalid month");
    if (d < 1 || 31 < d) perror("invalid day");
}
void Date::add_day(int n)
{
    d += n;
    if (d > 31) d %= 31;
}
ostream& operator<<(ostream& os, const Date& d)
{
    return os << '(' << d.year()
              << ',' << d.month()
              << ',' << d.day() << ')';
}
int main()
try {
    Date today(1978, 6, 25);
    //Date today(2004, 13, -5);
    Date tomorrow = today;
    tomorrow.add_day(1);
    cout << today << '\n'
         << tomorrow << '\n';
}
catch(exception& e) {
    cerr << e.what() << '\n';
    return 1;
}
catch(...) {
    cerr << "unknown error" << '\n';
    return 2;
}
//***************************************************************************************************************************************
//9.7.1
enum class Month
{
	jan = 1, feb, mar, apr, may, jun, jul, aug, sep, oct, nov, dec
};

class Date
{
public:
	Date(int y, Month m, int d);

	void add_day(int n);

	Month month() const { return m; }
	int day() const { return d; }
	int year() const { return y; }

private:
	int y, d;
	Month m;
};

Date::Date(int yy, Month mm, int dd)
{
	int yearMin(1900), yearMax(3000);
	if (yy > yearMax || yy < yearMin)
		cout << "Invalid year.";
	if (int(mm) > 12 || int(mm) < 1) // you get a c cast
		cout << "Invalid month.";
	if (dd > 31 || dd < 1)
		cout << "Invalid day." << endl;
	else
	{
		y = yy; m = mm; d = dd;
	}
}

void Date::add_day(int n)
{
	//if d += n is more than 31, make it 1, else return d
	if (d += n > 31)
	{
		d = 1;
		int nextM = int(m) + 1;		
		if (nextM > 12)
		{
			m = Month::jan;
			if (++y > 3000)
				cout << "It is not the year 3000; busted" << endl;
		}
		else
			m = Month(nextM);			
	}
}

ostream& operator<<(ostream& os, const Date& d)
{
	return os << "(" << d.year() << "," << int(d.month()) << "," << d.day() << ")";
}

int main()
{
	
	Date today( 1978, Month::dec, 31 );
	Date tomorrow( today );

	tomorrow.add_day(1);

	cout << today << endl;
	cout << tomorrow << endl;
	cout<<endl<<endl;
	//invalid date
	Date invalidDate{ 1300, Month::dec, -4 };

	return 0;
}
//***************************************************************************************************************************************
//9.7.3
#include <iostream>
#include <ctime>
using namespace std;
int constexpr yearMax = 3000;
int constexpr yearMin = 1700;

enum class Month
{
    jan=1, feb, mar, apr, may, jun, jul, aug, sep, oct, nov, dec
};

struct Date {
    int y; Month m; int d;
public:
    Date(int y, Month m, int d);

    void add_day(int n);

    Month month() const { return m; }
    int day() const { return d; }
    int year() const {return y; }
};

// helper functions:

Date::Date(int yy, Month mm, int dd)
{
    //check that (y,m,d) is a valid date
    if (yy < yearMin || yy > yearMax)
        cout << "Error, invalid year." << endl;
    else if (int(mm) < 1 || int(mm) > 12)
        cout << "Error, invalid month." << endl;
    else if (dd < 1 || dd > 31)
        cout << "Error, invalid day." << endl;
    // if it is, use to initialize dd
    else
    {
        y = yy;
        m = mm;
        d = dd;
    }

    return;
}

void Date::add_day(int n)
{
    bool lastDay = false;
    bool endYear = false;
    for (int i = 0; i < n; ++i)
    {
        if (d == 31) 
        {
            lastDay = true;
            d = 1;
        }
        else ++d;

        if (lastDay)
        {
            lastDay = false;
            if (int(m) == 12)
            {
                m = Month::jan;
                endYear = true;
            }
            m = Month(int(m) + 1);
        }
        if (endYear)
        {
            endYear = false;
            if (y == yearMax) cout << "Max year reached" << endl;
            ++y;
        }
    }
    
}

// Printing
ostream& operator<<(ostream& os, const Date& d)
{
    return os << d.d << "/" << int(d.m) << "/" << d.y << endl; 
}

int main()
{
    // set today to June 25, 1978
    Date today {1978, Month::jun, 25};
    cout << "Today: " << today << endl;

    Date tomorrow {today};
    tomorrow.add_day(1);
    
    cout << "Tomorrow: " << tomorrow << endl;

    Date invalidDate {1300, Month::dec, -4};

    return 0;

}


